{"version":3,"sources":["util.js","index.js"],"names":["setToLS","key","value","localStorage","setItem","error","alert","getFromLS","getItem","setToLSasJSON","JSONedValue","JSON","stringify","getFromLSasJSON","lsItem","parse","init","superStorageKey","taskArray","index","currentUID","currentDateElement","document","querySelector","editWindow","listOfCurrentTasks","addTask","modalWindow","currentEditForm","currentForm","innerHTML","Date","toLocaleDateString","createNewTask","taskItem","listItem","createElement","formIsValid","classList","add","taskName","dataset","uid","appendChild","addEventListener","processor","push","localStorageTaskArray","length","arrayElement","writeCurrentTaskArraytoLS","event","target","remove","formElement","elements","pickedArrayElement","taskDescription","selectPriority","plannedDate","actualDate","addTaskOnClick","toggle","currentEditFormOnSubmit","preventDefault","splice","window","location","reload","deleteFormOnReset","toDelete","confirm","removeChild","children","currentFormOnSubmit","reset","currentFormOnReset"],"mappings":"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","file":"ToDo.e31bb0bc.map","sourceRoot":"..","sourcesContent":["export const setToLS = (key, value) => {\r\n    try {\r\n        localStorage.setItem(key, value)\r\n    } catch (error) {\r\n        alert(error)\r\n    }\r\n};\r\nexport const getFromLS = (key) => {\r\n    try {\r\n        return localStorage.getItem(key)\r\n    } catch (error) {\r\n        alert(error)\r\n    }\r\n};\r\nexport const setToLSasJSON = (key, value) => {\r\n    try {\r\n        const JSONedValue = JSON.stringify(value)\r\n        localStorage.setItem(key, JSONedValue)\r\n    } catch (error) {\r\n        alert(error)\r\n    }\r\n};\r\nexport const getFromLSasJSON = (key) => {\r\n    try {\r\n        const lsItem = localStorage.getItem(key)\r\n        if (lsItem === null) {\r\n            alert(\"Alas\")\r\n        }\r\n        return JSON.parse(lsItem)\r\n\r\n    } catch (error) {\r\n        alert(error)\r\n    }\r\n};","import {\r\n    setToLS,\r\n    getFromLS,\r\n    setToLSasJSON,\r\n    getFromLSasJSON\r\n} from \"./util.js\"\r\n\r\n// загрузка списка при загрузке страницы\r\nconst init = () => {\r\n\r\n    // Переменные\r\n    const superStorageKey = \"key\";\r\n    let taskArray = [];\r\n    let index = 0;\r\n    let currentUID = 0;\r\n\r\n    // Селекторы\r\n    const currentDateElement = document.querySelector(\".Date\");\r\n    const editWindow = document.querySelector('#formEditing');\r\n    const listOfCurrentTasks = document.querySelector(\".listOfCurrentTasks\");\r\n    const addTask = document.querySelector(\".addTask\");\r\n    const modalWindow = document.querySelector('#formCreation')\r\n    const currentEditForm = document.querySelector('form[name=\"editForm\"]');\r\n    const currentForm = document.querySelector('form[name=\"Form\"]');\r\n\r\n    // Логика работы\r\n    // Устанавливаем дату\r\n    currentDateElement.innerHTML = new Date().toLocaleDateString();\r\n    // Создание нового элемента списка задач\r\n    const createNewTask = (taskItem) => {\r\n        const listItem = document.createElement(\"li\");\r\n        if (taskItem.formIsValid == false) {\r\n            listItem.classList.add(\"elementIsNotValid\");\r\n        };\r\n        listItem.innerHTML = taskItem.taskName;\r\n        // присвоение атрибута data-uid для того, чтобы обращаться к элементу списка по номеру.\r\n        listItem.dataset.uid = index;\r\n        listOfCurrentTasks.appendChild(listItem);\r\n        listItem.addEventListener(\"click\", processor)\r\n        index++;\r\n        taskArray.push(taskItem);\r\n    };\r\n    // Работа с LS\r\n\r\n    const localStorageTaskArray = getFromLSasJSON(superStorageKey)\r\n    if (localStorageTaskArray && localStorageTaskArray.length) {\r\n        for (let arrayElement of localStorageTaskArray) {\r\n            createNewTask(arrayElement)\r\n        }\r\n    }\r\n    const writeCurrentTaskArraytoLS = () => {\r\n        setToLSasJSON(superStorageKey, taskArray)\r\n    };\r\n\r\n\r\n\r\n    // Обработчики event'ов\r\n    // первое объявление переменной на редактирование формы\r\n    // создается обработчик события (processor), дающий возможность обратиться к конкретному элементу формы. Именованная функция, чтобы решить проблему с разнесением логики\r\n    function processor(event) {\r\n        currentUID = event.target.dataset.uid;\r\n        editWindow.classList.remove(\"Modal-disabled\");\r\n        const currentEditForm = document.querySelector('form[name=\"editForm\"]');\r\n        // работа с html напрямую. \r\n        const formElement = currentEditForm.elements;\r\n        // создается переменная, которая обращается к выбранному элементу в taskArray \r\n        const pickedArrayElement = taskArray[currentUID];\r\n        // каждому input назначается хранимое значение в taskArray\r\n        formElement.taskName.value = pickedArrayElement.taskName;\r\n        formElement.taskDescription.value = pickedArrayElement.taskDescription;\r\n        formElement.selectPriority.value = pickedArrayElement.selectPriority;\r\n        formElement.plannedDate.value = pickedArrayElement.plannedDate;\r\n        formElement.actualDate.value = pickedArrayElement.actualDate;\r\n    };\r\n\r\n    const addTaskOnClick = () => {\r\n        modalWindow.classList.toggle(\"Modal-disabled\");\r\n    }\r\n    addTask.addEventListener(\"click\", addTaskOnClick);\r\n\r\n    // и тут в игру врывается редактирование форм! Удар! Разработчик рыдает и пропускает переменную! Еще удар! Разработчик забивает на переменные! Зрители в экстазе! \r\n\r\n    const currentEditFormOnSubmit = (event) => {\r\n        event.preventDefault()\r\n        const formElement = event.target.elements;\r\n        const taskName = formElement.taskName.value;\r\n        const taskDescription = formElement.taskDescription.value;\r\n        const selectPriority = formElement.selectPriority.value;\r\n        const plannedDate = formElement.plannedDate.value;\r\n        const actualDate = formElement.actualDate.value;\r\n\r\n        const formIsValid = taskName && taskDescription && plannedDate;\r\n\r\n        const taskItem = {\r\n            taskName,\r\n            taskDescription,\r\n            selectPriority,\r\n            plannedDate,\r\n            actualDate,\r\n            formIsValid\r\n        };\r\n\r\n        taskArray.splice(currentUID, 1, taskItem);\r\n        writeCurrentTaskArraytoLS()\r\n\r\n        window.location.reload();\r\n    };\r\n\r\n    // Комментирую как хочу. И переменные называю как хочу. Эту вот хотела назвать Симба. Тут вешаается событие на редактирование формы.\r\n    currentEditForm.addEventListener(\"submit\", currentEditFormOnSubmit);\r\n\r\n    const deleteFormOnReset = (event) => {\r\n        editWindow.classList.add(\"Modal-disabled\");\r\n        const toDelete = confirm(\"Вы действительно хотите удалить задачу?\")\r\n        if (toDelete) {\r\n            listOfCurrentTasks.removeChild(listOfCurrentTasks.children[currentUID])\r\n            taskArray.splice(currentUID, 1)\r\n            writeCurrentTaskArraytoLS()\r\n        }\r\n    };\r\n\r\n    currentEditForm.addEventListener(\"reset\", deleteFormOnReset);\r\n\r\n\r\n    // События на добавление формы (отправить и отменить)\r\n    const currentFormOnSubmit = (event) => {\r\n        event.preventDefault()\r\n        const formElement = event.target.elements;\r\n        const taskName = formElement.taskName.value;\r\n        const taskDescription = formElement.taskDescription.value;\r\n        const selectPriority = formElement.selectPriority.value;\r\n        const plannedDate = formElement.plannedDate.value;\r\n        const actualDate = formElement.actualDate.value;\r\n\r\n        const formIsValid = taskName && taskDescription && plannedDate;\r\n\r\n        const taskItem = {\r\n            taskName,\r\n            taskDescription,\r\n            selectPriority,\r\n            plannedDate,\r\n            actualDate,\r\n            formIsValid\r\n        };\r\n\r\n        createNewTask(taskItem);\r\n        // localStorage.setItem(superStorageKey, JSON.stringify(taskArray)); - старая версия\r\n        // делаем запись в LS с преобразованием JSON в виде строки. Преобразуем taskArray \r\n        setToLSasJSON(superStorageKey, taskArray)\r\n        // modalWindow.classList.add(\"Modal-disabled\");\r\n        currentForm.reset();\r\n    };\r\n\r\n    currentForm.addEventListener(\"submit\", currentFormOnSubmit);\r\n\r\n    const currentFormOnReset = () => {\r\n        modalWindow.classList.add(\"Modal-disabled\");\r\n    }\r\n    currentForm.addEventListener(\"reset\", currentFormOnReset);\r\n};\r\ndocument.addEventListener(\"DOMContentLoaded\", init)"]}