{"version":3,"sources":["util.js","index.js"],"names":["setToLS","key","value","localStorage","setItem","error","alert","getFromLS","getItem","setToLSasJSON","JSONedValue","JSON","stringify","getFromLSasJSON","lsItem","parse","superStorageKey","taskArray","index","currentUID","currentDateElement","document","querySelector","editWindow","listOfCurrentTasks","addTask","modalWindow","currentEditForm","currentForm","innerHTML","Date","toLocaleDateString","createNewTask","taskItem","listItem","createElement","formIsValid","classList","add","taskName","dataset","uid","appendChild","addEventListener","processor","push","localStorageTaskArray","length","arrayElement","writeCurrentTaskArraytoLS","event","target","remove","formElement","elements","pickedArrayElement","taskDescription","selectPriority","plannedDate","actualDate","addTaskOnClick","toggle","currentEditFormOnSubmit","preventDefault","deleteFormOnReset","toDelete","confirm","removeChild","children","splice","currentFormOnSubmit","reset","currentFormOnReset"],"mappings":"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","file":"ToDo.e31bb0bc.map","sourceRoot":"..","sourcesContent":["export const setToLS=(key, value)=>{\r\n    try {\r\n        localStorage.setItem(key, value)\r\n    } catch (error) {\r\n        alert (error)\r\n    }\r\n};\r\nexport const getFromLS=(key)=>{\r\n    try {\r\n        return localStorage.getItem(key)\r\n    } catch (error) {\r\n        alert (error)\r\n    }\r\n};\r\nexport const setToLSasJSON=(key, value)=>{\r\n    try {\r\n        const JSONedValue=JSON.stringify(value)\r\n        localStorage.setItem(key, JSONedValue)\r\n    } catch (error) {\r\n        alert (error)\r\n    }\r\n};\r\nexport const getFromLSasJSON=(key)=>{\r\n    try {\r\n        const lsItem=localStorage.getItem(key)\r\n        return JSON.parse(lsItem)\r\n        \r\n    } catch (error) {\r\n        alert (error)\r\n    }\r\n};","import {\r\n    setToLS,\r\n    getFromLS,\r\n    setToLSasJSON,\r\n    getFromLSasJSON\r\n} from \"./util.js\"\r\n\r\n// Переменные\r\nconst superStorageKey = \"key\";\r\nlet taskArray = [];\r\nlet index = 0;\r\nlet currentUID = 0;\r\n\r\n// Селекторы\r\nconst currentDateElement = document.querySelector(\".Date\");\r\nconst editWindow = document.querySelector('#formEditing');\r\nconst listOfCurrentTasks = document.querySelector(\".listOfCurrentTasks\");\r\nconst addTask = document.querySelector(\".addTask\");\r\nconst modalWindow = document.querySelector('#formCreation')\r\nconst currentEditForm = document.querySelector('form[name=\"editForm\"]');\r\nconst currentForm = document.querySelector('form[name=\"Form\"]');\r\n\r\n// Логика работы\r\n// Устанавливаем дату\r\ncurrentDateElement.innerHTML = new Date().toLocaleDateString();\r\n// Создание нового элемента списка задач\r\nconst createNewTask = (taskItem) => {\r\n    const listItem = document.createElement(\"li\");\r\n    if (taskItem.formIsValid == false) {\r\n        listItem.classList.add(\"elementIsNotValid\");\r\n    };\r\n    listItem.innerHTML = taskItem.taskName;\r\n    // присвоение атрибута data-uid для того, чтобы обращаться к элементу списка по номеру.\r\n    listItem.dataset.uid = index;\r\n    listOfCurrentTasks.appendChild(listItem);\r\n    listItem.addEventListener(\"click\", processor)\r\n    index++;\r\n    taskArray.push(taskItem);\r\n};\r\n// Работа с LS\r\n\r\nconst localStorageTaskArray = getFromLSasJSON(superStorageKey)\r\nif (localStorageTaskArray.length) {\r\n    for (let arrayElement of localStorageTaskArray) {\r\n        createNewTask(arrayElement)\r\n    }\r\n}\r\nconst writeCurrentTaskArraytoLS = () => {\r\n    setToLSasJSON(superStorageKey, taskArray)\r\n};\r\n\r\n\r\n\r\n// Обработчики event'ов\r\n// первое объявление переменной на редактирование формы\r\n// создается обработчик события (processor), дающий возможность обратиться к конкретному элементу формы. Именованная функция, чтобы решить проблему с разнесением логики\r\nfunction processor(event) {\r\n    currentUID = event.target.dataset.uid;\r\n    editWindow.classList.remove(\"Modal-disabled\");\r\n    const currentEditForm = document.querySelector('form[name=\"editForm\"]');\r\n    // работа с html напрямую. \r\n    const formElement = currentEditForm.elements;\r\n    // создается переменная, которая обращается к выбранному элементу в taskArray \r\n    const pickedArrayElement = taskArray[currentUID];\r\n    // каждому input назначается хранимое значение в taskArray\r\n    formElement.taskName.value = pickedArrayElement.taskName;\r\n    formElement.taskDescription.value = pickedArrayElement.taskDescription;\r\n    formElement.selectPriority.value = pickedArrayElement.selectPriority;\r\n    formElement.plannedDate.value = pickedArrayElement.plannedDate;\r\n    formElement.actualDate.value = pickedArrayElement.actualDate;\r\n};\r\n\r\nconst addTaskOnClick = () => {\r\n    modalWindow.classList.toggle(\"Modal-disabled\");\r\n}\r\naddTask.addEventListener(\"click\", addTaskOnClick);\r\n\r\n// и тут в игру врывается редактирование форм! Удар! Разработчик рыдает и пропускает переменную! Еще удар! Разработчик забивает на переменные! Зрители в экстазе! \r\n\r\nconst currentEditFormOnSubmit = (event) => {\r\n    event.preventDefault()\r\n    const formElement = event.target.elements;\r\n    const taskName = formElement.taskName.value;\r\n    const taskDescription = formElement.taskDescription.value;\r\n    const selectPriority = formElement.selectPriority.value;\r\n    const plannedDate = formElement.plannedDate.value;\r\n    const actualDate = formElement.actualDate.value;\r\n};\r\n// Комментирую как хочу. И переменные называю как хочу. Эту вот хотела назвать Симба. Тут вешаается событие на редактирование формы.\r\ncurrentEditForm.addEventListener(\"submit\", currentEditFormOnSubmit);\r\n\r\nconst deleteFormOnReset = (event) => {\r\n    editWindow.classList.add(\"Modal-disabled\");\r\n    const toDelete = confirm(\"Вы действительно хотите удалить задачу?\")\r\n    if (toDelete) {\r\n        listOfCurrentTasks.removeChild(listOfCurrentTasks.children[currentUID])\r\n        taskArray.splice(currentUID, 1) \r\n        writeCurrentTaskArraytoLS()\r\n    }\r\n};\r\n\r\ncurrentEditForm.addEventListener(\"reset\", deleteFormOnReset);\r\n\r\n\r\n// События на добавление формы (отправить и отменить)\r\nconst currentFormOnSubmit = (event) => {\r\n    event.preventDefault()\r\n    const formElement = event.target.elements;\r\n    const taskName = formElement.taskName.value;\r\n    const taskDescription = formElement.taskDescription.value;\r\n    const selectPriority = formElement.selectPriority.value;\r\n    const plannedDate = formElement.plannedDate.value;\r\n    const actualDate = formElement.actualDate.value;\r\n\r\n    const formIsValid = taskName && taskDescription && plannedDate;\r\n\r\n    const taskItem = {\r\n        taskName,\r\n        taskDescription,\r\n        selectPriority,\r\n        plannedDate,\r\n        actualDate,\r\n        formIsValid\r\n    };\r\n\r\n    createNewTask(taskItem);\r\n    // localStorage.setItem(superStorageKey, JSON.stringify(taskArray)); - старая версия\r\n    // делаем запись в LS с преобразованием JSON в виде строки. Преобразуем taskArray \r\n    setToLSasJSON(superStorageKey, taskArray)\r\n    // modalWindow.classList.add(\"Modal-disabled\");\r\n    currentForm.reset();\r\n};\r\n\r\ncurrentForm.addEventListener(\"submit\", currentFormOnSubmit);\r\n\r\nconst currentFormOnReset = () => {\r\n    modalWindow.classList.add(\"Modal-disabled\");\r\n}\r\ncurrentForm.addEventListener(\"reset\", currentFormOnReset);"]}